# please download pytest to run this

from database import Database
from game_control import GameControl

#  account creation tests

def test_create_account_success():
    # checks if a new account can be created
    db = Database()
    ok, msg = db.create_user("testuser1", "password123")
    assert ok == True


def test_create_account_duplicate():
    # checks if duplicate usernames are not allowed
    db = Database()
    db.create_user("testuser2", "password123")
    ok, msg = db.create_user("testuser2", "password123")
    assert ok == False


#  login tests

def test_login_success():
    # checks if a user can log in with the correct password
    db = Database()
    db.create_user("testuser3", "password123")
    ok, msg = db.verify_login("testuser3", "password123")
    assert ok == True


def test_login_incorrect_password():
    # checks if login fails when the wrong password is entered
    db = Database()
    db.create_user("testuser4", "password123")
    ok, msg = db.verify_login("testuser4", "wrongpassword")
    assert ok == False

#  board test

def board_test():
    # checks that when a player selects "Player vs Player" the board appears with all pieces.
    game = GameControl(player_color="W", is_computer_opponent=False)
    assert game.board is not None
    assert len(game.board.get_pieces()) == 24  # 12 per side
